
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brilla en la U</title>


    <style>
.countdown{
    --number-color: hsl(0 0% 100%);
    --text-color: hsl(0 0% 25%);
    --dot-color: hsl(0 0% 10%);
    --dot-color-remaining: hsl(182, 100%, 32%);
    --dot-color-active: hsl(359, 100%, 50%);
    font-family: 'poppins', system-ui, sans-serif;
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 1rem;
    width: min(60rem, 100%);
    margin-inline: auto;
    container: inline-size;
    > .part {
      aspect-ratio: 1/1;
      display: grid;
      place-items: center;
      > .remaining {
        grid-area: 1/1;
        color: hsl(0 0% 100%);
        display: grid;
        text-align: center;
        font-size: 4cqi;
        >.number {
          color: var(--number-color);
        }
        >.text {
          color: var(--text-color);
          text-transform: uppercase;
          font-size: 0.5em;
        }
      }
      > .dot-container {
        grid-area: 1/1;
        height: 100%;
        width: 4%;
        rotate: calc(360deg / var(--dots) * var(--dot-idx));
        > .dot {
          width: 100%;
          aspect-ratio: 1/1;
          background-color: var(--dot-color);
          border-radius: 50%;
          transition: background-color .25s;
          &[data-active=true]{
            background-color: var(--dot-color-remaining);
            &[data-lastactive=true]{
              background-color: var(--dot-color-active);
            }
          }
        }
      }
    }
  }
  
  * { box-sizing: border-box }
  html, body { height: 100% }
  body {
    margin-top: 25px;
    padding: 2rem;
    background-color: hsl(0 0% 0%);
    display: grid;
    gap: 1rem;
    align-content: center;
  }
  h1 {
    font-family: 'poppins',system-ui, sans-serif;
    color: hsl(0 0% 100%);
    text-align: center;
    >span:last-of-type{
      color: hsl(182, 100%, 32%)
    }
  }
  .bible {
            font-family: 'Georgia', serif;
            font-size: 1.5rem;
            font-style: italic;
            color: #4a2c2a;
            border-left: 4px solid #8b4513;
            padding-left: 12px;
            margin: 20px auto;
            max-width: 600px;
        
            padding: 15px;
            border-radius: 8px;
            box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1);
        }

.bible::before,
.bible::after {
    font-size: 2rem;
    color: #8b4513;
}

.bible span {
            display: block;
            font-weight: bold;
            text-align: right;
            margin-top: 10px;
            color: #6d4c41;
        }
        /* Media Query para PC (pantallas grandes, +1024px) */
@media screen and (min-width: 1024px) {
    body {
        padding: 20px;
    }

    h1 {
        font-size: 3rem;
    }

    .countdown {
        font-size: 3rem;
    }

    .bible {
        font-size: 1.8rem;
        max-width: 1200px;
        padding: 10px;
        text-align: center;
    }
}

/* Media Query para Celulares (máximo 600px) */
@media screen and (max-width: 600px) {
    h1 {
        font-size: 2rem;
    }

    .countdown {
        font-size: 2rem;
    }

    .bible {
        font-size: 1.2rem;
        padding: 10px;
        text-align: center;
    }
}

/*bacground*/

@import url("https://fonts.googleapis.com/css2?family=Asap&display=swap");
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}
html,
body {
  overscroll-behavior-x: none;
  overscroll-behavior-y: none;
}
body {
  font-family: "Asap", sans-serif;
  position: relative;
  width: 100vw;
  min-height: 100vh;
  text-align: center;
  overflow-x: hidden;
  background: linear-gradient(
    to bottom,
    hsl(200deg, 80%, 55%),
    hsl(200deg, 80%, 80%),
    hsl(200deg, 80%, 80%),
    hsl(230deg, 80%, 80%),
    hsl(260deg, 80%, 80%),
    hsl(290deg, 80%, 80%),
    hsl(320deg, 80%, 80%),
    hsl(340deg, 80%, 80%),
    hsl(340deg, 80%, 70%) 100%
  );
  color: black;
  font-size: clamp(13px, 5.5vw, 30px);
}
main {
  position: relative;
  mix-blend-mode: overlay;
}
section {
  position: relative;
  width: 100vw;
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
}
canvas {
  -moz-user-select: none;
  -webkit-user-select: none;
  -ms-user-select: none;
  user-select: none;
  position: fixed;
  width: 100vw;
  height: 100vh;
  top: 0;
  left: 0;
}

#cloud div::before,
#cloud div::after {
  content: "";
  display: block;
  position: fixed;
  bottom: 0;
  left: 0;

  width: 100vw;
  height: 100vh;

  background-image: url(https://raw.githubusercontent.com/happy358/misc/main/image/cloud_X.png);

  background-repeat: repeat-x;
  animation: cloud var(--duration) linear infinite forwards;

  --posX: right;
  --duration: 15s;
  --lowHeight: 20vh;
  --highHeight: 90vh;
  --layerNum: 4;
  --index: 0;
  --opacity: 0.5;
  --moveX: 300px;

  animation-delay: calc(
    (var(--duration) / var(--layerNum)) * var(--index) * -1
  );
  opacity: 0;
}
#cloud div::before {
  --index: 0;
}
#cloud div::after {
  --index: 2;
  transform: scale3d(-1, 1, 1); /*左右反転*/
}
#cloud div#cloud_layer2::before,
#cloud div#cloud_layer2::after {
  background-image: url(https://raw.githubusercontent.com/happy358/misc/main/image/cloud.png);
}
#cloud div#cloud_layer2::before {
  --index: 3;
}
#cloud div#cloud_layer2::after {
  --index: 1;
}

.arrows {
  width: auto;
  height: auto;
  position: absolute;
  bottom: 0.5rem;
  text-align: center;
  mix-blend-mode: overlay;
}
.arrows div {
  --arrowSize: 1.3rem;
  --arrowColor: currentColor;

  width: var(--arrowSize);
  height: var(--arrowSize);
  margin: calc(var(--arrowSize) * -1.5) 0;
  background: transparent;
  border: calc(var(--arrowSize) * 0.11) solid;
  border-color: transparent transparent var(--arrowColor) var(--arrowColor);
  transform: rotate(-45deg);
  animation: arrow 2s infinite linear;
}
@keyframes arrow {
  0% {
    opacity: 0;
  }
  40% {
    opacity: 1;
  }
  80% {
    opacity: 0;
  }
  100% {
    opacity: 0;
  }
}
.arrows div:nth-of-type(3) {
  animation-delay: -0.8s;
}
.arrows div:nth-of-type(2) {
  animation-delay: -0.4s;
}
.arrows div:nth-of-type(1) {
  animation-delay: 0s;
}

@keyframes cloud {
  0% {
    opacity: 0;
    background-position: var(--posX) var(--moveX) bottom
      calc(-1 * var(--lowHeight));
    background-size: calc(1 * var(--lowHeight)) var(--lowHeight);
  }
  5% {
    opacity: var(--opacity);
  }
  80% {
    opacity: var(--opacity);
  }
  100% {
    opacity: 0;
    background-position: var(--posX) bottom;
    background-size: calc(3 * var(--highHeight)) var(--highHeight);
  }
}

    </style>
</head>
<body>
  

    <h1>Sueña en grande: <span> La Física y la Universidad te esperan !</span></h1>
    <div class="countdown" data-target-date="2025-04-27 00:00:00"></div>    
    <canvas id="canvas"></canvas>
    <div id="cloud">
      <div id="cloud_layer1"></div>
      <div id="cloud_layer2"></div>
    </div>
    <quote class="bible" id="bibleQuote">
        Sabiduría ante todo; adquiere sabiduría;  
        Y sobre todas tus posesiones adquiere inteligencia.  
        <span>— Proverbios 4:7 (RVR1960)</span>
    </quote>

<script>
const countdownEls = document.querySelectorAll(".countdown")
countdownEls.forEach(countdownEl => createCountdown(countdownEl))

function createCountdown(countdownEl){
  const target = new Date(new Date(countdownEl.dataset.targetDate).toLocaleString('en', ))
  const parts = {
    days: {text: ["días","day"], dots: 30},
    hours: {text: ["horas","hour"], dots: 24},
    minutes: {text: ["minutos","minute"], dots: 60},
    seconds: {text: ["segundos","second"], dots: 60},
  }

  Object.entries(parts).forEach(([key, value])=>{
    const partEl = document.createElement("div");
    partEl.classList.add("part", key);
    partEl.style.setProperty("--dots", value.dots);
    value.element = partEl;

    const remainingEl = document.createElement("div");
    remainingEl.classList.add("remaining");
    remainingEl.innerHTML = `
      <span class="number"></span>
      <span class="text"></span>
    `
    partEl.append(remainingEl);
    for(let i = 0; i < value.dots; i++){
      const dotContainerEl = document.createElement("div");
      dotContainerEl.style.setProperty("--dot-idx", i);
      dotContainerEl.classList.add("dot-container")
      const dotEl = document.createElement("div");
      dotEl.classList.add("dot")
      dotContainerEl.append(dotEl);
      partEl.append(dotContainerEl);
    }
    countdownEl.append(partEl);
  })
  getRemainingTime(target, parts)
}

function getRemainingTime(target, parts, first=true){
  const now = new Date()
  if(first) console.log({target, now})
  const remaining = {}
  let seconds = Math.floor((target - (now))/1000);
  let minutes = Math.floor(seconds/60);
  let hours = Math.floor(minutes/60);
  let days = Math.floor(hours/24);
  hours = hours-(days*24);
  minutes = minutes-(days*24*60)-(hours*60);
  seconds = seconds-(days*24*60*60)-(hours*60*60)-(minutes*60);
  Object.entries({days, hours, minutes, seconds}).forEach(([key, value])=>{
    const remaining = parts[key].element.querySelector(".number");
    const text = parts[key].element.querySelector(".text");
    remaining.innerText = value;
    text.innerText = parts[key].text[Number(value==1)]
    const dots = parts[key].element.querySelectorAll(".dot")
    dots.forEach((dot, idx)=>{
      dot.dataset.active = idx <= value;
      dot.dataset.lastactive = idx == value;
    })
  })
  if(now <= target){
    window.requestAnimationFrame(()=>{
      getRemainingTime(target, parts, false)
    });
  }
}

</script>

<script>
       // Lista de versículos de la Reina-Valera 1960 (sabiduría, inteligencia, ciencia y bendiciones)
       const bibleVerses = [
    { text: "Sabiduría ante todo; adquiere sabiduría; Y sobre todas tus posesiones adquiere inteligencia.", reference: "Proverbios 4:7" },
    { text: "Porque Jehová da la sabiduría, Y de su boca viene el conocimiento y la inteligencia.", reference: "Proverbios 2:6" },
    { text: "Bienaventurado el hombre que halla la sabiduría, Y que obtiene la inteligencia.", reference: "Proverbios 3:13" },
    { text: "Enséñanos de tal modo a contar nuestros días, Que traigamos al corazón sabiduría.", reference: "Salmos 90:12" },
    { text: "El principio de la sabiduría es el temor de Jehová; Buen entendimiento tienen todos los que practican sus mandamientos.", reference: "Salmos 111:10" },
    { text: "Mas el que me oyere, habitará confiadamente Y vivirá tranquilo, sin temor del mal.", reference: "Proverbios 1:33" },
    { text: "Si alguno de vosotros tiene falta de sabiduría, pídala a Dios, el cual da a todos abundantemente y sin reproche, y le será dada.", reference: "Santiago 1:5" },
    { text: "La bendición de Jehová es la que enriquece, Y no añade tristeza con ella.", reference: "Proverbios 10:22" },
    { text: "Los mandamientos de Jehová son rectos, que alegran el corazón; El precepto de Jehová es puro, que alumbra los ojos.", reference: "Salmos 19:8" },
    { text: "En Dios haremos proezas, Y él hollará a nuestros enemigos.", reference: "Salmos 60:12" },
    { text: "Bienaventurado el varón que no anduvo en consejo de malos, Ni estuvo en camino de pecadores, Ni en silla de escarnecedores se ha sentado;", reference: "Salmos 1:1" },
    { text: "Clama a mí, y yo te responderé, y te enseñaré cosas grandes y ocultas que tú no conoces.", reference: "Jeremías 33:3" },
    { text: "Jehová cumplirá su propósito en mí; Tu misericordia, oh Jehová, es para siempre; No desampares la obra de tus manos.", reference: "Salmos 138:8" },
    { text: "Y todo lo que hacéis, sea de palabra o de hecho, hacedlo todo en el nombre del Señor Jesús, dando gracias a Dios Padre por medio de él.", reference: "Colosenses 3:17" }
];

        function getBibleVerse() {
            const startDate = new Date(2024, 0, 1); // Fecha base: 1 de enero de 2024
            const endDate = new Date(2025, 3, 27); // Límite: 27 de abril de 2025
            const today = new Date();

            if (today > endDate) {
                // Si la fecha actual es después del 27 de abril de 2025, mantener la última cita fija
                const lastVerse = bibleVerses[bibleVerses.length - 1];
                document.getElementById("bibleQuote").innerHTML = `
                    ${lastVerse.text}  
                    <span>— ${lastVerse.reference} (RVR1960)</span>
                `;
                return;
            }

            // Calcular cuántos días han pasado desde la fecha base
            const diffDays = Math.floor((today - startDate) / (1000 * 60 * 60 * 24));
            const verseIndex = Math.floor(diffDays / 4) % bibleVerses.length;

            // Seleccionar el versículo correspondiente
            const selectedVerse = bibleVerses[verseIndex];

            // Insertar en el HTML
            document.getElementById("bibleQuote").innerHTML = `
                ${selectedVerse.text}  
                <span>— ${selectedVerse.reference} (RVR1960)</span>
            `;
        }

        // Ejecutar la función al cargar la página
        window.onload = getBibleVerse;
  


</script>

<script>

    /*!
Sky and Birds Background
Copyright (c) 2024 by Wakana Y.K. (https://codepen.io/wakana-k/pen/XWQpVNB)

bird animation SEE -> https://codepen.io/wakana-k/pen/dyLGQEv
*/
"use strict";

import * as THREE from "three";

import { GPUComputationRenderer as e } from "three/addons/misc/GPUComputationRenderer.js";

!(function () {
  function n() {
    (h = window.innerWidth / 2),
      (y = window.innerHeight / 2),
      (u.aspect = window.innerWidth / window.innerHeight),
      u.updateProjectionMatrix(),
      m.setSize(window.innerWidth, window.innerHeight);
  }
  function t(e) {
    !1 !== e.isPrimary && ((v = e.clientX - h), (p = e.clientY - y));
  }
  const o = {
    color1: "turquoise",
    color2: "#aaaaaa",
    colorMode: "lerpGradient",
    alphaBackground: !0,
    separation: 21,
    alignment: 20,
    cohesion: 20,
    freedom: 0.75,
    speedLimit: 10,
    birdSize: 1,
    wingSpan: 20,
    numRatio: 0.3
  };
  (o.color1 = o.color1 || "red"),
    (o.color2 = o.color2 || "#aaaaaa"),
    (o.colorMode = o.colorMode || "varianceGradient"),
    (o.alphaBackground = o.alphaBackground || !1),
    (o.bgColor = o.bgColor || "white"),
    (o.separation = o.separation || 20),
    (o.alignment = o.alignment || 20),
    (o.cohesion = o.cohesion || 20),
    (o.freedom = o.freedom || 0.75),
    (o.speedLimit = o.speedLimit || 10),
    (o.birdSize = o.birdSize || 1),
    (o.wingSpan = o.wingSpan || 20),
    (o.numRatio = o.numRatio || 1);
  const i = 32,
    a = Math.round(i * i * o.numRatio),
    r =
      "uniform float time;\nuniform float delta;\n\nvoid main() {\n\n  vec2 uv = gl_FragCoord.xy / resolution.xy;\n  vec4 tmpPos = texture2D( texturePosition, uv );\n  vec3 position = tmpPos.xyz;\n  vec3 velocity = texture2D( textureVelocity, uv ).xyz;\n\n  float phase = tmpPos.w;\n\n  phase = mod( ( phase + delta +\n    length( velocity.xz ) * delta * 3. +\n    max( velocity.y, 0.0 ) * delta * 6. ), 62.83 );\n\n  gl_FragColor = vec4( position + velocity * delta * 15. , phase );\n\n}",
    l =
      "uniform float time;\nuniform float testing;\nuniform float delta; // about 0.016\nuniform float separationDistance; // 20\nuniform float alignmentDistance; // 40\nuniform float cohesionDistance;\nuniform float speedLimit;\nuniform float freedomFactor;\nuniform vec3 predator;\n\nconst float width = resolution.x;\nconst float height = resolution.y;\n\nconst float PI = 3.141592653589793;\nconst float PI_2 = PI * 2.0;\n// const float VISION = PI * 0.55;\n\nfloat zoneRadius = 40.0;\nfloat zoneRadiusSquared = 1600.0;\n\nfloat separationThresh = 0.45;\nfloat alignmentThresh = 0.65;\n\nconst float UPPER_BOUNDS = BOUNDS;\nconst float LOWER_BOUNDS = -UPPER_BOUNDS;\n\nfloat rand(vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvoid main() {\n\n  zoneRadius = separationDistance + alignmentDistance + cohesionDistance;\n  separationThresh = separationDistance / zoneRadius;\n  alignmentThresh = ( separationDistance + alignmentDistance ) / zoneRadius;\n  zoneRadiusSquared = zoneRadius * zoneRadius;\n\n\n  vec2 uv = gl_FragCoord.xy / resolution.xy;\n  vec3 birdPosition, birdVelocity;\n\n  vec3 selfPosition = texture2D( texturePosition, uv ).xyz;\n  vec3 selfVelocity = texture2D( textureVelocity, uv ).xyz;\n\n  float dist;\n  vec3 dir; // direction\n  float distSquared;\n\n  float separationSquared = separationDistance * separationDistance;\n  float cohesionSquared = cohesionDistance * cohesionDistance;\n\n  float f;\n  float percent;\n\n  vec3 velocity = selfVelocity;\n\n  float limit = speedLimit;\n  \n  dir = predator * UPPER_BOUNDS - selfPosition;\n  dir.z = 0.;\n  // dir.z *= 0.6;\n  dist = length( dir );\n  distSquared = dist * dist;\n\n  float preyRadius = 150.0;\n  float preyRadiusSq = preyRadius * preyRadius;\n\n  // move birds away from predator\n  if (dist < preyRadius) {\n\n    f = ( distSquared / preyRadiusSq - 1.0 ) * delta * 100.;\n    velocity += normalize( dir ) * f;\n    limit += 5.0;\n  }\n\n  // if (testing == 0.0) {}\n  // if ( rand( uv + time ) < freedomFactor ) {}\n\n  // Attract flocks to the center\n  vec3 central = vec3( 0., 0., 0. );\n  dir = selfPosition - central;\n  dist = length( dir );\n\n  dir.y *= 2.5;\n  velocity -= normalize( dir ) * delta * 5.;\n\n  for (float y=0.0;y<height;y++) {\n    for (float x=0.0;x<width;x++) {\n\n      vec2 ref = vec2( x + 0.5, y + 0.5 ) / resolution.xy;\n      birdPosition = texture2D( texturePosition, ref ).xyz;\n\n      dir = birdPosition - selfPosition;\n      dist = length(dir);\n\n      if (dist < 0.0001) continue;\n\n      distSquared = dist * dist;\n\n      if (distSquared > zoneRadiusSquared ) continue;\n\n      percent = distSquared / zoneRadiusSquared;\n\n      if ( percent < separationThresh ) { // low\n\n        // Separation - Move apart for comfort\n        f = (separationThresh / percent - 1.0) * delta;\n        velocity -= normalize(dir) * f;\n\n      } else if ( percent < alignmentThresh ) { // high\n\n        // Alignment - fly the same direction\n        float threshDelta = alignmentThresh - separationThresh;\n        float adjustedPercent = ( percent - separationThresh ) / threshDelta;\n\n        birdVelocity = texture2D( textureVelocity, ref ).xyz;\n\n        f = ( 0.5 - cos( adjustedPercent * PI_2 ) * 0.5 + 0.5 ) * delta;\n        velocity += normalize(birdVelocity) * f;\n\n      } else {\n\n        // Attraction / Cohesion - move closer\n        float threshDelta = 1.0 - alignmentThresh;\n        float adjustedPercent = ( percent - alignmentThresh ) / threshDelta;\n\n        f = ( 0.5 - ( cos( adjustedPercent * PI_2 ) * -0.5 + 0.5 ) ) * delta;\n\n        velocity += normalize(dir) * f;\n\n      }\n    }\n  }\n\n  // this make tends to fly around than down or up\n  // if (velocity.y > 0.) velocity.y *= (1. - 0.2 * delta);\n\n  // Speed Limits\n  if ( length( velocity ) > limit ) {\n    velocity = normalize( velocity ) * limit;\n  }\n\n  gl_FragColor = vec4( velocity, 1.0 );\n\n}",
    s =
      "attribute vec2 reference;\nattribute float birdVertex;\n\nattribute vec3 birdColor;\n\nuniform sampler2D texturePosition;\nuniform sampler2D textureVelocity;\n\nvarying vec4 vColor;\nvarying float z;\n\nuniform float time;\nuniform float birdSize;\n\nvoid main() {\n\n  vec4 tmpPos = texture2D( texturePosition, reference );\n  vec3 pos = tmpPos.xyz;\n  vec3 velocity = normalize(texture2D( textureVelocity, reference ).xyz);\n\n  vec3 newPosition = position;\n\n  if ( birdVertex == 4.0 || birdVertex == 7.0 ) {\n    // flap wings\n    newPosition.y = sin( tmpPos.w ) * 5. * birdSize;\n  }\n\n  newPosition = mat3( modelMatrix ) * newPosition;\n\n  velocity.z *= -1.;\n  float xz = length( velocity.xz );\n  float xyz = 1.;\n  float x = sqrt( 1. - velocity.y * velocity.y );\n\n  float cosry = velocity.x / xz;\n  float sinry = velocity.z / xz;\n\n  float cosrz = x / xyz;\n  float sinrz = velocity.y / xyz;\n\n  mat3 maty =  mat3(\n    cosry, 0, -sinry,\n    0    , 1, 0     ,\n    sinry, 0, cosry\n  );\n\n  mat3 matz =  mat3(\n    cosrz , sinrz, 0,\n    -sinrz, cosrz, 0,\n    0     , 0    , 1\n  );\n  newPosition =  maty * matz * newPosition;\n  newPosition += pos;\n  z = newPosition.z;\n\n  vColor = vec4( birdColor, 1.0 );\n  gl_Position = projectionMatrix *  viewMatrix  * vec4( newPosition, 1.0 );\n}",
    d =
      "varying vec4 vColor;\nvarying float z;\nuniform vec3 color;\nvoid main() {\n/* // 距離に応じて色変更\n  // Fake colors for now\n  float rr = 0.2 + ( 1000. - z ) / 1000. * vColor.x;\n  float gg = 0.2 + ( 1000. - z ) / 1000. * vColor.y;\n  float bb = 0.2 + ( 1000. - z ) / 1000. * vColor.z;\n  gl_FragColor = vec4( rr, gg, bb, 1. );\n  */\n  \n  gl_FragColor = vec4( vColor.rgb, 1. );\n}";
  class c extends THREE.BufferGeometry {
    constructor() {
      function e() {
        for (let e = 0; e < arguments.length; e++) l.array[u++] = arguments[e];
      }
      function n(e) {
        const n = o;
        n.colorMode = n.colorMode || "variance";
        const t = n.color1,
          i = n.color2,
          a = new THREE.Color(t),
          r = new THREE.Color(i);
        let l, s;
        if (
          ((s = -1 != n.colorMode.indexOf("Gradient") ? Math.random() : e),
          0 == n.colorMode.indexOf("variance"))
        ) {
          const e = THREE.MathUtils.clamp(0, a.r + Math.random() * r.r, 1),
            n = THREE.MathUtils.clamp(0, a.g + Math.random() * r.g, 1),
            t = THREE.MathUtils.clamp(0, a.b + Math.random() * r.b, 1);
          l = new THREE.Color(e, n, t);
        } else
          l =
            0 == n.colorMode.indexOf("mix")
              ? new THREE.Color(t + s * i)
              : a.lerp(r, s);
        return l;
      }
      super();
      const t = 3 * a,
        r = 3 * t,
        l = new THREE.BufferAttribute(new Float32Array(3 * r), 3),
        s = new THREE.BufferAttribute(new Float32Array(3 * r), 3),
        d = new THREE.BufferAttribute(new Float32Array(2 * r), 2),
        c = new THREE.BufferAttribute(new Float32Array(r), 1);
      this.setAttribute("position", l),
        this.setAttribute("birdColor", s),
        this.setAttribute("reference", d),
        this.setAttribute("birdVertex", c);
      let u = 0;
      const f = o.wingSpan,
        m = o.birdSize;
      for (let n = 0; n < a; n++)
        e(0, -0, -20 * m, 0, 4 * m, -20 * m, 0, 0, 30 * m),
          e(0, 0, -15 * m, -f * m, 0, 0, 0, 0, 15 * m),
          e(0, 0, 15 * m, f * m, 0, 0, 0, 0, -15 * m);
      const v = {};
      for (let e = 0; e < 3 * t; e++) {
        const t = ~~(~~(e / 3) / 3),
          r = (t % i) / i,
          l = ~~(t / i) / i,
          u = ~~(e / 9) / a,
          f = u.toString(),
          m = -1 != o.colorMode.indexOf("Gradient");
        let p;
        (p = !m && v[f] ? v[f] : n(u)),
          m || v[f] || (v[f] = p),
          (s.array[3 * e + 0] = p.r),
          (s.array[3 * e + 1] = p.g),
          (s.array[3 * e + 2] = p.b),
          (d.array[2 * e] = r),
          (d.array[2 * e + 1] = l),
          (c.array[e] = e % 9);
      }
      this.scale(0.2, 0.2, 0.2);
    }
  }
  let u,
    f,
    m,
    v = 0,
    p = 0,
    h = window.innerWidth / 2,
    y = window.innerHeight / 2;
  const g = 800,
    w = g / 2;
  let x,
    z,
    R,
    E,
    b,
    P,
    T = performance.now();
  ((u = new THREE.PerspectiveCamera(
    75,
    window.innerWidth / window.innerHeight,
    1,
    1e3
  )).position.z = 350),
    (f = new THREE.Scene()),
    o.alphaBackground || (f.background = new THREE.Color(o.bgColor)),
    (m = new THREE.WebGLRenderer({
      canvas: canvas,
      alpha: o.alphaBackground
    })).setPixelRatio(window.devicePixelRatio),
    m.setSize(window.innerWidth, window.innerHeight),
    (function () {
      (x = new e(i, i, m)),
        !1 === m.capabilities.isWebGL2 && x.setDataType(THREE.HalfFloatType);
      const n = x.createTexture(),
        t = x.createTexture();
      (function (e) {
        const n = e.image.data;
        for (let e = 0, t = n.length; e < t; e += 4) {
          const t = Math.random() * g - w,
            o = Math.random() * g - w,
            i = Math.random() * g - w;
          (n[e + 0] = t), (n[e + 1] = o), (n[e + 2] = i), (n[e + 3] = 1);
        }
      })(n),
        (function (e) {
          const n = e.image.data;
          for (let e = 0, t = n.length; e < t; e += 4) {
            const t = Math.random() - 0.5,
              o = Math.random() - 0.5,
              i = Math.random() - 0.5;
            (n[e + 0] = 10 * t),
              (n[e + 1] = 10 * o),
              (n[e + 2] = 10 * i),
              (n[e + 3] = 1);
          }
        })(t),
        (z = x.addVariable("textureVelocity", l, t)),
        (R = x.addVariable("texturePosition", r, n)),
        x.setVariableDependencies(z, [R, z]),
        x.setVariableDependencies(R, [R, z]),
        (E = R.material.uniforms),
        (b = z.material.uniforms),
        (E.time = {
          value: 0
        }),
        (E.delta = {
          value: 0
        }),
        (b.time = {
          value: 1
        }),
        (b.delta = {
          value: 0
        }),
        (b.testing = {
          value: 1
        }),
        (b.separationDistance = {
          value: 1
        }),
        (b.alignmentDistance = {
          value: 1
        }),
        (b.cohesionDistance = {
          value: 1
        }),
        (b.freedomFactor = {
          value: 1
        }),
        (b.speedLimit = {
          value: o.speedLimit
        }),
        (b.predator = {
          value: new THREE.Vector3()
        }),
        (z.material.defines.BOUNDS = g.toFixed(2)),
        (z.wrapS = THREE.RepeatWrapping),
        (z.wrapT = THREE.RepeatWrapping),
        (R.wrapS = THREE.RepeatWrapping),
        (R.wrapT = THREE.RepeatWrapping),
        x.init();
    })(),
    window.addEventListener("pointermove", t),
    window.addEventListener("pointerdown", t),
    window.addEventListener("resize", n),
    (b.separationDistance.value = o.separation),
    (b.alignmentDistance.value = o.alignment),
    (b.cohesionDistance.value = o.cohesion),
    (function () {
      const e = new c();
      P = {
        birdSize: {
          value: o.birdSize
        },
        texturePosition: {
          value: null
        },
        textureVelocity: {
          value: null
        },
        time: {
          value: 1
        },
        delta: {
          value: 0
        }
      };
      const n = new THREE.ShaderMaterial({
          uniforms: P,
          vertexShader: s,
          fragmentShader: d,
          side: THREE.DoubleSide
        }),
        t = new THREE.Mesh(e, n);
      (t.rotation.y = Math.PI / 2),
        (t.matrixAutoUpdate = !1),
        t.updateMatrix(),
        f.add(t);
    })(),
    (function e() {
      requestAnimationFrame(e),
        (function () {
          const e = performance.now();
          let n = (e - T) / 1e3;
          n > 1 && (n = 1),
            (T = e),
            (E.time.value = e),
            (E.delta.value = n),
            (b.time.value = e),
            (b.delta.value = n),
            (P.time.value = e),
            (P.delta.value = n),
            b.predator.value.set((0.5 * v) / h, (-0.5 * p) / y, 0),
            (v = 1e4),
            (p = 1e4),
            x.compute(),
            (P.texturePosition.value = x.getCurrentRenderTarget(R).texture),
            (P.textureVelocity.value = x.getCurrentRenderTarget(z).texture),
            m.render(f, u);
        })();
    })();
})();

</script>

</body>
</html>

